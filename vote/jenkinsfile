pipeline{
    agent{
        docker{
            image 'python:2.7.16-slim'
            args '-u root'
        }
    }
    
    stages{
        stage("Build"){
            when{
                changeset "**/vote/**"
                }
            steps{
                echo 'Building Vote..'
                dir('vote'){
                sh 'pip install -r requirements.txt'
                }
            }
        }
        stage("Test"){
            when{
               changeset "**/vote/**"
                }
            steps{
                echo 'Testing vote..'
                dir('vote'){
                sh 'nosetests -v'
                }
            }
        }
    }
} 
